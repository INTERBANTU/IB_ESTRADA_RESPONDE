# IB - EstradaResponde

<div align="center">

![IB - EstradaResponde](client/public/IB_ESTRADA_RESPONDE/00%20-%20Login.png)

**"A estrada tem perguntas â€” nÃ³s temos as respostas."**

*O teu guia inteligente do CÃ³digo da Estrada*

[![Powered by InterBantu](https://img.shields.io/badge/Powered%20by-InterBantu-orange?style=flat-square)](https://interbantu.com)

</div>

---

Sistema de chatbot inteligente desenvolvido pela **InterBantu** para responder perguntas sobre o **CÃ³digo da Estrada de MoÃ§ambique** e legislaÃ§Ã£o de trÃ¢nsito rodoviÃ¡rio. Utiliza tecnologias de inteligÃªncia artificial (IA) para processar documentos legais e fornecer respostas precisas baseadas na legislaÃ§Ã£o oficial, sempre citando as fontes (artigos, nÃºmeros e alÃ­neas) e incluindo valores de multas quando disponÃ­veis.

## ğŸ¬ Como Funciona - Fluxo Completo

### 1ï¸âƒ£ Tela de Login

O sistema comeÃ§a com uma tela de login intuitiva e responsiva, onde vocÃª pode selecionar seu perfil (UsuÃ¡rio, Gestor ou Administrador) e fazer login automaticamente com as credenciais de teste.

![Tela de Login](client/public/IB_ESTRADA_RESPONDE/00%20-%20Login.png)

**CaracterÃ­sticas:**
- Design moderno e responsivo para mobile e desktop
- SeleÃ§Ã£o visual de perfil com preenchimento automÃ¡tico de credenciais
- Interface otimizada para diferentes tamanhos de tela

---

### 2ï¸âƒ£ Tela Inicial do Assistente Virtual

ApÃ³s o login, vocÃª Ã© recebido pelo **IB - EstradaResponde** com uma mensagem de boas-vindas e perguntas sugeridas para comeÃ§ar rapidamente.

![Tela Inicial - Assistente Virtual](client/public/IB_ESTRADA_RESPONDE/01%20-%20Usuario%20-%20Tela%20Inicial.png)

**Funcionalidades:**
- Mensagem de apresentaÃ§Ã£o do IB - EstradaResponde da InterBantu
- Perguntas sugeridas por categoria (Velocidade, Multas, ConduÃ§Ã£o, etc.)
- Interface de chat limpa e intuitiva
- HistÃ³rico de conversa persistente

---

### 3ï¸âƒ£ Exemplo de Uso: Consulta sobre Carta de ConduÃ§Ã£o

#### Pergunta: "Esqueci a carta de conduÃ§Ã£o, qual Ã© a multa?"

O sistema busca informaÃ§Ãµes relevantes no CÃ³digo da Estrada e fornece uma resposta completa com:

- **ExplicaÃ§Ã£o clara e direta** da infraÃ§Ã£o
- **Valor da multa** quando disponÃ­vel
- **CitaÃ§Ãµes precisas** dos artigos, nÃºmeros e alÃ­neas
- **SeÃ§Ã£o de fontes** no final da resposta

![Consulta - Carta de ConduÃ§Ã£o - Parte 1](client/public/IB_ESTRADA_RESPONDE/02%20-%20P1%20-%20P1%20-%20Esqueci%20Carta%20de%20Conducao.png)

![Consulta - Carta de ConduÃ§Ã£o - Parte 2](client/public/IB_ESTRADA_RESPONDE/02%20-%20P1%20-%20P2%20-%20Esqueci%20Carta%20de%20Conducao.png)

#### Detalhamento do Artigo 127 - Carta de ConduÃ§Ã£o

As imagens abaixo mostram a resposta detalhada sobre o Artigo 127 do CÃ³digo da Estrada, incluindo informaÃ§Ãµes completas sobre a obrigatoriedade de portar a carta de conduÃ§Ã£o:

![Artigo 127 - Carta de ConduÃ§Ã£o - Parte 1](client/public/IB_ESTRADA_RESPONDE/02%20-%20Artigo%20127%20-%20Carta%20de%20Condu%C3%A7%C3%A3o%20-%20P1.png)

![Artigo 127 - Carta de ConduÃ§Ã£o - Parte 2](client/public/IB_ESTRADA_RESPONDE/02%20-%20Artigo%20127%20-%20Carta%20de%20Condu%C3%A7%C3%A3o%20-%20P2.png)

ğŸ“„ **Para conferir o documento oficial completo:** [Decreto-Lei n.Âº 1/2011 - CÃ³digo da Estrada](https://www.imahanjane.co.mz/wp-content/uploads/2021/03/Decreto-Lei-n-01.2011-Aprova-o-Codigo-da-Estrada.pdf)

**Detalhes da Resposta:**
- Artigo 127 do CÃ³digo da Estrada
- NÃºmero especÃ­fico da infraÃ§Ã£o
- Valor da multa em meticais (MT)
- ReferÃªncias completas aos documentos oficiais

---

### 4ï¸âƒ£ Exemplo de Uso: Consulta sobre Multas por Velocidade

#### Pergunta: "Quais sÃ£o as multas dentro e fora das localidades?"

O sistema fornece uma resposta abrangente sobre limites de velocidade e multas relacionadas, incluindo:

- **Limites de velocidade** para diferentes tipos de veÃ­culos
- **Valores de multas** para excesso de velocidade
- **DiferenÃ§as** entre dentro e fora das localidades
- **CitaÃ§Ãµes completas** de todos os artigos relevantes

![Consulta - Multas - Parte 1](client/public/IB_ESTRADA_RESPONDE/03%20-%20P2%20-%20P1%20-%20Multas%20Dentro%20e%20Fora%20das%20Localidades.png)

![Consulta - Multas - Parte 2](client/public/IB_ESTRADA_RESPONDE/03%20-%20P2%20-%20P2%20-%20Multas%20Dentro%20e%20Fora%20das%20Localidades.png)

![Consulta - Multas - Parte 3](client/public/IB_ESTRADA_RESPONDE/03%20-%20P2%20-%20P3%20-%20Multas%20Dentro%20e%20Fora%20das%20Localidades.png)

**CaracterÃ­sticas da Resposta:**
- OrganizaÃ§Ã£o em seÃ§Ãµes claras
- Tabelas e listas quando apropriado
- MÃºltiplos artigos citados quando relevante
- SeÃ§Ã£o de fontes completa no final

---

## ğŸ”„ Fluxo Completo do Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. LOGIN                                                    â”‚
â”‚     â€¢ Selecionar perfil (UsuÃ¡rio/Gestor/Admin)              â”‚
â”‚     â€¢ Credenciais preenchidas automaticamente                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. ASSISTENTE VIRTUAL                                       â”‚
â”‚     â€¢ Mensagem de boas-vindas do IB - EstradaResponde       â”‚
â”‚     â€¢ Perguntas sugeridas por categoria                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. FAZER PERGUNTA                                           â”‚
â”‚     â€¢ Digitar pergunta sobre CÃ³digo da Estrada              â”‚
â”‚     â€¢ Sistema busca em documentos processados                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. PROCESSAMENTO                                            â”‚
â”‚     â€¢ Busca semÃ¢ntica no ChromaDB                            â”‚
â”‚     â€¢ RecuperaÃ§Ã£o de contexto relevante                      â”‚
â”‚     â€¢ GeraÃ§Ã£o de resposta pelo LLM                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. RESPOSTA                                                 â”‚
â”‚     â€¢ ExplicaÃ§Ã£o clara e direta                              â”‚
â”‚     â€¢ Valores de multas quando disponÃ­veis                   â”‚
â”‚     â€¢ CitaÃ§Ãµes de artigos, nÃºmeros e alÃ­neas                 â”‚
â”‚     â€¢ SeÃ§Ã£o de fontes completa                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ Sobre o Projeto

Este projeto foi desenvolvido pela **InterBantu** para facilitar o acesso e compreensÃ£o do CÃ³digo da Estrada e legislaÃ§Ã£o de trÃ¢nsito para cidadÃ£os, condutores e profissionais do setor. O sistema utiliza processamento de linguagem natural (NLP) e busca semÃ¢ntica para encontrar informaÃ§Ãµes relevantes em documentos PDF oficiais e fornecer respostas claras e precisas.

## ğŸš€ CaracterÃ­sticas

- âœ… **Frontend React**: Interface moderna e responsiva
- âœ… **Backend Python**: API Flask com suporte a mÃºltiplos modelos LLM
- âœ… **ChromaDB**: Banco de dados vetorial persistente (substitui FAISS)
- âœ… **Modelos LLM Modulares**: Troque facilmente entre OpenAI, Claude e Gemini
- âœ… **Sistema de UsuÃ¡rios**: UsuÃ¡rios, Gestores e Administradores
- âœ… **Upload de Documentos**: Processamento automÃ¡tico de PDFs (decretos e legislaÃ§Ã£o)

## ğŸ“‹ PrÃ©-requisitos

- Python 3.8+
- Node.js 18+
- Chave de API de um dos provedores LLM (OpenAI, Anthropic ou Google)

## ğŸ”§ InstalaÃ§Ã£o

### Backend (Python)

1. Navegue atÃ© a pasta `model`:
```bash
cd model
```

2. Instale as dependÃªncias:
```bash
pip install -r requirements.txt
```

3. Configure as variÃ¡veis de ambiente:
```bash
cp env.example .env
# Edite o .env com suas chaves de API
```

4. Execute a API:
```bash
python api.py
```

A API estarÃ¡ disponÃ­vel em `http://localhost:5001`

### Frontend (React)

1. Navegue atÃ© a pasta `client`:
```bash
cd client
```

2. Instale as dependÃªncias:
```bash
npm install
```

3. Configure a URL da API (opcional):
```bash
# Crie um arquivo .env.local com:
# VITE_API_URL=http://localhost:5000/api
```

4. Execute o servidor de desenvolvimento:
```bash
npm run dev
```

O frontend estarÃ¡ disponÃ­vel em `http://localhost:5174`

## âš™ï¸ ConfiguraÃ§Ã£o do Modelo LLM

Para trocar o modelo LLM, edite o arquivo `model/.env`:

### OpenAI (PadrÃ£o)
```env
LLM_PROVIDER=openai
OPENAI_API_KEY=sua_chave_aqui
OPENAI_MODEL=gpt-4o-mini
```

### Anthropic Claude
```env
LLM_PROVIDER=claude
ANTHROPIC_API_KEY=sua_chave_aqui
CLAUDE_MODEL=claude-sonnet-4-5-20250929
```

### Google Gemini
```env
LLM_PROVIDER=gemini
GOOGLE_API_KEY=sua_chave_aqui
GEMINI_MODEL=gemini-pro
```

## ğŸš€ Como Rodar

### MÃ©todo RÃ¡pido (Scripts)

O projeto inclui scripts de inicializaÃ§Ã£o para facilitar o processo:

#### 1. Iniciar Backend

```bash
./iniciar_backend.sh
```

Este script:
- Ativa o ambiente virtual Python
- Verifica se o arquivo `.env` existe (cria a partir de `env.example` se necessÃ¡rio)
- Inicia o servidor Flask na porta **5001**

#### 2. Iniciar Frontend

Em um terminal separado:

```bash
./iniciar_frontend.sh
```

Este script:
- Verifica e instala dependÃªncias do Node.js se necessÃ¡rio
- Inicia o servidor de desenvolvimento na porta **5174**

### MÃ©todo Manual

#### Backend

```bash
cd model
source venv/bin/activate  # ou use o venv do projeto original
python api.py
```

#### Frontend

```bash
cd client
npm install  # apenas na primeira vez
npm run dev
```

### Verificar se estÃ¡ rodando

- **Backend**: Acesse `http://localhost:5001/api/health` no navegador
- **Frontend**: Acesse `http://localhost:5174` no navegador

## ğŸ”„ Como Reiniciar

### Reiniciar Backend

1. **Parar o processo atual:**
   ```bash
   # Encontrar o processo
   lsof -ti:5001
   # ou
   ps aux | grep "python api.py"
   
   # Matar o processo (substitua PID pelo nÃºmero do processo)
   kill -9 PID
   ```

2. **Reiniciar:**
   ```bash
   ./iniciar_backend.sh
   ```

### Reiniciar Frontend

1. **Parar o processo atual:**
   - Pressione `Ctrl+C` no terminal onde o frontend estÃ¡ rodando
   - Ou encontre e mate o processo:
     ```bash
     lsof -ti:5174 | xargs kill -9
     ```

2. **Reiniciar:**
   ```bash
   ./iniciar_frontend.sh
   ```

### Reiniciar Tudo

```bash
# Parar todos os processos
pkill -f "python api.py"
pkill -f "vite"

# Reiniciar backend
./iniciar_backend.sh &

# Reiniciar frontend (em terminal separado)
./iniciar_frontend.sh
```

## ğŸ“– Como Usar

### 1. Acessar o Sistema

Abra o navegador e acesse: `http://localhost:5174`

### 2. Fazer Login

Use uma das credenciais de demonstraÃ§Ã£o:

- **UsuÃ¡rio**: `usuario@interbantu.com` / `usuario2024`
  - Acesso ao Assistente Virtual para fazer perguntas

- **Gestor**: `gestor@interbantu.com` / `gestor2024`
  - Acesso ao Painel do Gestor para gerenciar documentos
  - Acesso ao Assistente Virtual

- **Admin**: `admin@interbantu.com` / `admin2024`
  - Acesso completo ao Painel do Administrador
  - VisualizaÃ§Ã£o de estatÃ­sticas e gerenciamento de usuÃ¡rios

### 3. Upload de Documentos (Gestor/Admin)

1. FaÃ§a login como **Gestor** ou **Admin**
2. Acesse o **Painel do Gestor** ou **Painel do Administrador**
3. Na seÃ§Ã£o "Documentos", clique em "Fazer Upload"
4. Selecione arquivos PDF com decretos e legislaÃ§Ã£o de trÃ¢nsito
   - Exemplo: Decreto-Lei n.Âº 1/2011 - CÃ³digo da Estrada
5. Aguarde o processamento (pode levar alguns minutos dependendo do tamanho)
6. O sistema processarÃ¡ automaticamente e dividirÃ¡ em segmentos para busca

### 4. Fazer Perguntas (UsuÃ¡rio/Gestor/Admin)

1. Acesse o **Assistente Virtual**
2. Digite sua pergunta sobre o cÃ³digo de estrada ou legislaÃ§Ã£o de trÃ¢nsito
   - Exemplos:
     - "Quais sÃ£o os limites de velocidade dentro e fora das localidades?"
     - "Quais sÃ£o as multas por conduÃ§Ã£o sob influÃªncia de Ã¡lcool?"
     - "Em que locais Ã© proibida a ultrapassagem?"
3. Clique em "Enviar" ou pressione Enter
4. Aguarde a resposta baseada nos documentos processados
5. Use as perguntas sugeridas para comeÃ§ar rapidamente

### 5. Gerenciar Documentos (Gestor/Admin)

- **Visualizar documentos**: Veja todos os documentos processados
- **EstatÃ­sticas**: Acompanhe o nÃºmero de documentos e segmentos
- **Remover documentos**: Delete documentos se necessÃ¡rio (limpa o banco de dados)

### 6. Visualizar EstatÃ­sticas (Admin)

No Painel do Administrador, vocÃª pode ver:
- Total de documentos processados
- Total de segmentos de texto
- InformaÃ§Ãµes sobre o modelo LLM em uso

## ğŸ—ï¸ Estrutura do Projeto

```
ChatBot Regulamento/
â”œâ”€â”€ client/                 # Frontend React
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/      # Componentes React
â”‚   â”‚   â”œâ”€â”€ pages/          # PÃ¡ginas da aplicaÃ§Ã£o
â”‚   â”‚   â”œâ”€â”€ services/       # ServiÃ§os de API
â”‚   â”‚   â””â”€â”€ contexts/       # Contextos React
â”‚   â””â”€â”€ package.json
â”‚
â””â”€â”€ model/                  # Backend Python
    â”œâ”€â”€ api.py              # API Flask principal
    â”œâ”€â”€ config.py           # ConfiguraÃ§Ãµes
    â”œâ”€â”€ document_processor.py  # Processamento de PDFs
    â”œâ”€â”€ llm_providers/      # Provedores de LLM modulares
    â”‚   â”œâ”€â”€ base.py
    â”‚   â”œâ”€â”€ openai_provider.py
    â”‚   â”œâ”€â”€ claude_provider.py
    â”‚   â””â”€â”€ gemini_provider.py
    â””â”€â”€ requirements.txt
```

## ğŸ”Œ Endpoints da API

- `GET /api/health` - Health check
- `POST /api/upload` - Upload de documentos PDF
- `POST /api/chat` - Enviar pergunta ao chatbot
- `GET /api/documents` - InformaÃ§Ãµes dos documentos processados
- `DELETE /api/documents` - Limpar todos os documentos
- `GET /api/model` - InformaÃ§Ãµes do modelo LLM atual

## ğŸ› ï¸ Desenvolvimento

### Adicionar Novo Provedor LLM

1. Crie um novo arquivo em `model/llm_providers/` (ex: `new_provider.py`)
2. Herde de `BaseLLMProvider`:
```python
from .base import BaseLLMProvider

class NewProvider(BaseLLMProvider):
    def _initialize_llm(self):
        # Implemente a inicializaÃ§Ã£o
        pass
    
    def get_llm(self):
        return self.llm
```

3. Adicione ao factory em `llm_providers/__init__.py`
4. Adicione configuraÃ§Ãµes em `config.py`

## ğŸ“ Notas

- Os documentos sÃ£o armazenados em `./chroma_db_codigo_estrada` (configurÃ¡vel)
- Arquivos enviados sÃ£o salvos em `./uploads`
- A API suporta CORS configurÃ¡vel
- O sistema usa ChromaDB ao invÃ©s de FAISS para persistÃªncia
- Banco de dados separado do projeto de regulamento acadÃªmico

## ğŸ‘¥ Desenvolvido por

**InterBantu**

- Website: https://interbantu.com
- GitHub: https://github.com/INTERBANTU

## ğŸ“„ LicenÃ§a

Este projeto estÃ¡ licenciado sob a Apache License 2.0.

---

**Powered by [InterBantu](https://interbantu.com)**

